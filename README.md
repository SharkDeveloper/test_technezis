# Web Parser Bot

Telegram бот для парсинга цен с веб-сайтов. Бот принимает Excel файлы с данными о сайтах и извлекает информацию о ценах.

## Функциональность

- Прием Excel файлов (.xlsx, .xls) с данными о сайтах
- Парсинг цен с указанных сайтов
- Автоматическое отображение статистики после каждого парсинга
- Сохранение всех данных в PostgreSQL
- Асинхронная обработка запросов

## Структура проекта

```
.
├── api/                # FastAPI приложение
├── bot/               # Telegram бот
├── worker/            # Celery воркер для парсинга
├── docker-compose.yml # Конфигурация Docker
└── README.md          # Документация
```

## Требования к Excel файлу

Файл должен содержать следующие колонки:
- `title`: название сайта
- `url`: ссылка на сайт
- `xpath`: путь к элементу с ценой

## Запуск проекта

1. Клонируйте репозиторий:
```bash
git clone <repository-url>
cd <repository-name>
```

2. Запустите проект с помощью Docker Compose:
```bash
docker-compose up --build
```

## Использование

1. Запустите бота в Telegram
2. Нажмите кнопку "Загрузить файл"
3. Отправьте Excel файл с данными
4. Дождитесь результатов парсинга и статистики

## Технологии

- Python 3.11
- FastAPI
- Celery
- PostgreSQL
- Redis
- Docker
- aiogram 3.x
- pandas
- aiohttp
- SQLAlchemy
- BeautifulSoup4
- lxml

## Особенности

- Асинхронный парсинг сайтов
- Сохранение истории парсинга
- Автоматический подсчет статистики
- Обработка ошибок и повторные попытки
- Форматирование цен с разделителями тысяч 